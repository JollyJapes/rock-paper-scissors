<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
</head>

<body>

    <script>

        let playerSelection = window.prompt("Welcome to RPS V1.03. Please input Rock, Paper or Scissors to play");
        let computerSelection = computerPlay();
        let resultString = playRound(playerSelection, computerSelection);
        console.log(resultString);


        function computerPlay(){
            return Math.floor(Math.random()*3);             
        }
        
        function convertNumToRPS(num){
            let rps = (num == 0) ? "Rock" :
                (num == 1) ? "Paper" :
                (num == 2) ? "Scissors" : "RPS Error" ;
            return rps;    
        }    

        function convertRPSToNum(rps){
            let num = (rps == "Rock") ? 0 :
                (rps == "Paper") ? 1 :
                (rps == "Scissors") ? 2 : "RPS Error 2" ;
            return num;    
        }    

        function checkResult(playerSelection, computerSelection){
            let playerNum = convertRPSToNum(playerSelection);
            let result;
            (playerNum == computerSelection) ? result = "Draw" :
            ((playerNum - computerSelection) %2 ) ? result = "Lose" : result = "Win";
            return result;
        }

        function playRound (playerSelection, computerSelection) {
            playerSelection = playerSelection.toLowerCase();
            playerSelection = capitaliseFirst(playerSelection);
            let result = checkResult(playerSelection, computerSelection);
            let comparisonString = (result == "Win") ? "Beats" :
                                   (result == "Draw") ? "Matches" : "Beaten by"
            return `You ${result}! ${playerSelection} ${comparisonString} ${convertNumToRPS(computerSelection)}` ;
        }

        function capitaliseFirst (inputString){
            let char = inputString[0].toUpperCase();
            let outputString = char + inputString.slice(1);
            return outputString;
        }

    </script>

</body>
</html>